'''
Entries used to simulate log repair:

    s = if s.server_num != 1 do
      entry = %{1 => %{request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 1},
                2 => %{request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 2},
                3 => %{ request: %{cid: {4, 3},clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 3}}
      Log.merge_entries(s, entry)
    else
      entry = %{1 => %{request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 1},
                2 => %{request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 2},
                3 => %{request: %{cid: {5, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 2},
                4 => %{request: %{cid: {6, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 2},
                5 => %{request: %{cid: {6, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}}, term: 2}}
      Log.merge_entries(s, entry)
    end # if
'''
*******************************************************************

Script started on Sun Feb 20 22:44:10 2022
mix compile
-------------------------------------------------------------------
Server 2 Election Timeout - START
Server 3 stepdown at receiving vote request
Server 1 stepdown at receiving vote request
New leader elected! Server 2 is leader for Term 4
New leader's log: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  }
}
Leader log after receive_request_from_client: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18546.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  }
}
Leader log after receive_request_from_client: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18546.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  },
  5 => %{
    request: %{
      cid: {2, 1},
      clientP: #PID<18547.147.0>,
      cmd: {:MOVE, 356, 70, 49}
    },
    term: 4
  }
}
Server 1's logs after delete_entries_from: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  }
}
Server 3's logs after merge_entries: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18517.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  }
}
Server 1's logs after merge_entries: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18478.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  },
  5 => %{
    request: %{
      cid: {2, 1},
      clientP: #PID<18479.147.0>,
      cmd: {:MOVE, 356, 70, 49}
    },
    term: 4
  }
}
Server 3's logs after merge_entries: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18517.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  },
  5 => %{
    request: %{
      cid: {2, 1},
      clientP: #PID<18483.147.0>,
      cmd: {:MOVE, 356, 70, 49}
    },
    term: 4
  }
}
already updated. Server 1's logs stay the same
already updated. Server 3's logs stay the same
already updated. Server 1's logs stay the same
Server 1 stepdown at receiving vote request
New leader elected! Server 3 is leader for Term 5
New leader's log: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18517.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  },
  5 => %{
    request: %{
      cid: {2, 1},
      clientP: #PID<18483.147.0>,
      cmd: {:MOVE, 356, 70, 49}
    },
    term: 4
  }
}
Leader log after receive_request_from_client: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18517.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  },
  5 => %{
    request: %{
      cid: {2, 1},
      clientP: #PID<18483.147.0>,
      cmd: {:MOVE, 356, 70, 49}
    },
    term: 4
  },
  6 => %{
    request: %{
      cid: {3, 1},
      clientP: #PID<18531.147.0>,
      cmd: {:MOVE, 107, 64, 63}
    },
    term: 5
  }
}
Server 1's logs after merge_entries: %{
  1 => %{
    request: %{cid: {4, 1}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 1
  },
  2 => %{
    request: %{cid: {4, 2}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 2
  },
  3 => %{
    request: %{cid: {4, 3}, clientP: 0, cmd: {:MOVE, 635, 99, 65}},
    term: 3
  },
  4 => %{
    request: %{
      cid: {1, 1},
      clientP: #PID<18478.147.0>,
      cmd: {:MOVE, 132, 90, 98}
    },
    term: 4
  },
  5 => %{
    request: %{
      cid: {2, 1},
      clientP: #PID<18479.147.0>,
      cmd: {:MOVE, 356, 70, 49}
    },
    term: 4
  },
  6 => %{
    request: %{
      cid: {3, 1},
      clientP: #PID<18480.147.0>,
      cmd: {:MOVE, 107, 64, 63}
    },
    term: 5
  }
}
